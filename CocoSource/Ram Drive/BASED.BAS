5 PALETTE 12,63:PALETTE 13,0
30 JMS F
40 GOTO 410
50 GOTO 240
60 JMS EDIT
66 WIDTH 32:PRINT@9,"*** EDITOR ***":PRINT
100 A=(PEEK(&HBC)-14)*256
110 IF A<0 THEN A=0
120 W=PEEK(31)*256+PEEK(32)+50
140 J=&H1B00+A:H=W
150 GOSUB 330:GOSUB 330
160 H=W+MEM-60:GOSUB 330
170 LINEINPUT"FILE NAME: ";A$
180 IF A$="?" THEN DIR:GOTO 170
190 IF A$="" THEN 230
200 GOSUB 380
210 OPEN"I",#1,A$
220 EXEC &HE00+A+3:REM LOADFILE
230 EXEC &HE00+A:REM EDITFILE
240 INPUT B$:IF B$<>"" AND B$<>"Y" AND B$<>"YES" THEN 290
250 IF A$="" THEN 310
260 OPEN"O",#1,A$
270 EXEC &HE00+A+6:REM WRITFILE
280 END
290 IF B$="A" OR B$="APPEND" THEN 170
300 IF B$<>"W" AND B$<>"WRITE" THEN 230
310 LINE INPUT "WRITE TO WHAT FILE? ";A$: IF A$="" THEN 230
320 GOSUB 380:GOTO 260
330 H1=INT(H/256)
340 POKE J,H1
350 POKE J+1,H-H1*256
360 J=J+2
370 RETURN
380 IF INSTR(A$,"/")>0 OR INSTR(A$,".")>0THEN RETURN
390 U=INSTR(A$,":"): IF U=0 OR U=2 THEN U=LEN(A$)+1
400 A$=LEFT$(A$,U-1)+"/TXT"+RIGHT$(A$,LEN(A$)-U+1):RETURN
410 PCLEAR 3:GOTO 60
